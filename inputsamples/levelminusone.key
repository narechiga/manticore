\problem{
	\[ R x1, x2, x3, M, M1, M2, M7, x1_plus, x2_plus, x3_plus; 
	M1 := 1; 
	M2:= 2;
	M7:= 7;\](
	( x1^2 + x2^2 + x3^2 <= 1 ) ->
	\[(
	(?(M = M1); {
		x1' = (-x1^3 - x1*x3^2)*(x3^2 + 1), x2' = (-x2 - x1^2*x2)*(x3^2 + 1),
		x3' = (-x3 + 3*x1^2*x3)*(x3^2 + 1) - 3*x3 
		})
	++(?(M = M1); x1_plus := **; x2_plus := **; ?(x1^2 + x2^2 >= 10); ?(x1_plus^2 + x2_plus^2 < 3); x1 := x1_plus; x2 := x2_plus; M:=M2 )
	++(?(M = M2); {
		x1' = x2,
		x2' = -x1 } )
	++(?(M = M7); {
		x1' = 1, x2' = 5, x3' = x1 })


	)***\]( x1^2 + x2^2 + x3^2 < 100 )
	)
}

/* this is a comment */
/* single line

\problem{ \[ R x1, x2, x3, M, M1, M2, M7, x1_plus, x2_plus, x3_plus; M1 := 1; M2:= 2; M7:= 7;\]( ( x1^2 + x2^2 + x3^2 <= 1 ) -> \[( (?(M = M1); { x1' = (-x1^3 - x1*x3^2)*(x3^2 + 1), x2' = (-x2 - x1^2*x2)*(x3^2 + 1), x3' = (-x3 + 3*x1^2*x3)*(x3^2 + 1) - 3*x3 }) ++(?(M = M1); x1_plus := **; x2_plus := **; ?(x1^2 + x2^2 >= 10); ?(x1_plus^2 + x2_plus^2 < 3); x1 := x1_plus; x2 := x2_plus; M:=M2 ) ++(?(M = M2); { x1' = x2, x2' = -x1 } ) ++(?(M = M7); { x1' = 1, x2' = 5, x3' = x1 }) )***\]( x1^2 + x2^2 + x3^2 < 100 )) }

*/
